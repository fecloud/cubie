<!DOCTYPE html>
<html>
<head>
    <title>服务器状态</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"/>
    <link rel="apple-touch-icon-precomposed" href="/img/screen_icon.png"/>
    <meta name="format-detection" content="telephone=no"/>
    <link rel="stylesheet" href="../css/com.css"/>
    <link rel="stylesheet" href="../css/status.css"/>
    <link rel="stylesheet" href="../css/switchery.min.css"/>
    <script type="text/javascript" src="../js/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="../js/com.js"></script>
    <script type="text/javascript" src="../js/html5.js"></script>
    <script type="text/javascript" src="../js/switchery.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            var fm_switch = document.querySelector('.fm-switch');
            var fm = new Switchery(fm_switch);
            fm_switch.onchange = function() {
                console.log(this.checked);
            };

            var arduino_switch = document.querySelector('.arduino-switch');
            var arduino = new Switchery(arduino_switch);

            var baiduyunsync_switch = document.querySelector('.baiduyunsync-switch');
            var baiduyunsync = new Switchery(baiduyunsync_switch);

            var photos_switch = document.querySelector('.photos-switch');
            var photos = new Switchery(photos_switch);


            var status = new Switchery(document.querySelector('.status-switch'),{ disabled: true });


            back_bind();


            $.ajax({url: status_service + parseInt(Math.random() * 10000000) + '.php?action=status&value=/', success: function (data) {

                var status = data.data;

                if(status.fm){
                    fm_switch.click();
                }if(status.arduino){
                    arduino_switch.click();
                }if(status.baiduyunsync){
                    baiduyunsync_switch.click();
                }if(status.photos){
                    photos_switch.click();
                }

                $('#arch').html(status.arch);
                $('#core').html(status.core);
                $('#platform').html(status.platform);
                $('#version').html(status.version);
                $('#uptime').html(mToH(parseInt(status.uptime)));

            }});

            $.ajax({url: status_service + parseInt(Math.random() * 10000000) + '.php?action=uptime&value=/', success: function (data) {

                if(data.data.load){
                    $('#load').html(data.data.load);
                }else {
                    $('#load').html('暂无');
                }

                if(data.data.server_time){
                    $('#server_time').html(data.data.server_time);
                }else {
                    $('#server_time').html('暂无');
                }


            }});

            $.ajax({url: status_service + parseInt(Math.random() * 10000000) + '.php?action=df&value=/dev/sda2', success: function (data) {

                if(data.data){
                    var arr = data.data;
                    $('#quota').html(arr[1]);
                    $('#used').html(arr[2]);
                    $('#free').html(arr[3]);
                    $('#used_free').html(arr[4]);
                }else {
                    $('#quota').html('暂无');
                    $('#used').html('暂无');
                    $('#free').html('暂无');
                    $('#used_free').html('暂无');
                }


            }});

        });

    </script>

</head>

<body>

<div id="page">

    <div id="header">

        <div class="btn back_btn">返回</div>
        <h1>服务器状态</h1>
        <div style=" width: 50px;height: 30px;"></div>

    </div>

    <ul id="content" class="list group">
        <li class="list-item">
            <div class="box">
                <div class="content">文件管理服务</div>
                <div class="service_operate"><input type="checkbox" class="fm-switch" id="fm"/></div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">温度监控服务</div>
                <div class="service_operate"><input type="checkbox" class="arduino-switch" id="arduino"/></div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">百度网盘同步服务</div>
                <div class="service_operate"><input type="checkbox" class="baiduyunsync-switch" id="baiduyunsync" /></div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">相册服务</div>
                <div class="service_operate"><input type="checkbox" class="photos-switch" id="photos" /></div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">服务状态服务</div>
                <div class="service_operate"><input type="checkbox" class="status-switch" id="status" checked/></div>
            </div>
        </li>

    </ul>

    <ul id="content" class="list group">
        <li  class="list-item">
            <div class="box">
                <div class="content">CPU</div>
                <div class="service_operate text_right" id="arch">...</div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">核心数</div>
                <div class="service_operate text_right" id="core">...</div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">平台</div>
                <div class="service_operate text_right" id="platform">...</div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">软件版本</div>
                <div class="service_operate text_right" id="version">...</div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">软件运行时间</div>
                <div class="service_operate text_right" id="uptime">...</div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">服务器时间</div>
                <div class="service_operate text_right" id="server_time">...</div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">服务器负载</div>
                <div class="service_operate text_right" id="load">...</div>
            </div>
        </li>


    </ul>


    <ul id="content" class="list group">
        <li class="list-item">
            <div class="box">
                <div class="content">磁盘容量</div>
                <div class="service_operate text_right" id="quota">...</div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">已使用</div>
                <div class="service_operate text_right" id="used">...</div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">剩余</div>
                <div class="service_operate text_right" id="free">...</div>
            </div>
        </li>
        <li class="list-item">
            <div class="box">
                <div class="content">使用率</div>
                <div class="service_operate text_right" id="used_free">...</div>
            </div>
        </li>

    </ul>


    <div style="text-align: center;margin: 10px 0 20px 0;" class="ios7_font">
        Copyright FCloud, Inc
    </div>

</div>

</body>
</html>